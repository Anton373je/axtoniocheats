--[[
    366axtonio Script | v4.0 â€” Single-page GUI mit funktionierenden Features und neuen Beispielen
    - Funktioniert: JumpPower, SpeedBoost, Noclip, Teleport Random Player
    - Neue Features: Gravity Slider, HipHeight Slider, FOV Slider, Fly (Toggle + Speed), Sit, Reset, ESP Box+Name, FPS Booster
]]

-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

-- State
local State = {
    JumpPower = 50,
    SpeedBoost = 1,
    Noclip = false,
    Fly = false,
    FlySpeed = 60,
    Gravity = Workspace.Gravity,
    HipHeight = 2,
    FOV = Workspace.CurrentCamera.FieldOfView,
    ESP = false
}

-- Utility
local function getHumanoid()
    return LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
end

local function getHumanoidRoot()
    local hum = getHumanoid()
    if hum then return LocalPlayer.Character:FindFirstChild("HumanoidRootPart") end
end

-- Noclip
RunService.Stepped:Connect(function()
    if State.Noclip and LocalPlayer.Character then
        for _,part in pairs(LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") and part.CanCollide == true and part.Name ~= "HumanoidRootPart" then
                pcall(function() part.CanCollide = false end)
            end
        end
    end
end)

-- Fly
local FlyBV, FlyBG
local function enableFly(val)
    State.Fly = val
    local root = getHumanoidRoot()
    if not root then return end
    if val then
        FlyBV = Instance.new("BodyVelocity")
        FlyBV.MaxForce = Vector3.new(1e5,1e5,1e5)
        FlyBV.Velocity = Vector3.new(0,0,0)
        FlyBV.Parent = root

        FlyBG = Instance.new("BodyGyro")
        FlyBG.MaxTorque = Vector3.new(1e5,1e5,1e5)
        FlyBG.CFrame = root.CFrame
        FlyBG.Parent = root
    else
        pcall(function() if FlyBV then FlyBV:Destroy() end end)
        pcall(function() if FlyBG then FlyBG:Destroy() end end)
    end
end

RunService.Heartbeat:Connect(function()
    if State.Fly then
        local root = getHumanoidRoot()
        if root and FlyBV then
            local cam = Workspace.CurrentCamera
            local move = Vector3.new(0,0,0)
            local forward = (UserInputService:IsKeyDown(Enum.KeyCode.W) and 1 or 0) - (UserInputService:IsKeyDown(Enum.KeyCode.S) and 1 or 0)
            local right = (UserInputService:IsKeyDown(Enum.KeyCode.D) and 1 or 0) - (UserInputService:IsKeyDown(Enum.KeyCode.A) and 1 or 0)
            local up = (UserInputService:IsKeyDown(Enum.KeyCode.E) and 1 or 0) - (UserInputService:IsKeyDown(Enum.KeyCode.Q) and 1 or 0)
            local dir = (cam.CFrame.LookVector * forward) + (cam.CFrame.RightVector * right) + Vector3.new(0, up, 0)
            if dir.Magnitude > 0 then
                move = dir.Unit * State.FlySpeed
            end
            FlyBV.Velocity = move
        end
    end
end)

-- Teleport Random Player
local function teleportRandomPlayer()
    local pls = Players:GetPlayers()
    if #pls <= 1 then return end
    local target = pls[math.random(1,#pls)]
    if target == LocalPlayer then target = pls[math.random(1,#pls)] end
    local root = getHumanoidRoot()
    local targetRoot = target.Character and target.Character:FindFirstChild("HumanoidRootPart")
    if root and targetRoot then
        root.CFrame = targetRoot.CFrame + Vector3.new(2,0,2)
    end
end

-- GUI Creation
local screen = Instance.new("ScreenGui")
screen.Name = "AxtonioUI_v4"
screen.ResetOnSpawn = false
screen.Parent = game.CoreGui

local main = Instance.new("Frame", screen)
main.Size = UDim2.new(0,400,0,500)
main.Position = UDim2.new(0.5,-200,0.1,0)
main.BackgroundColor3 = Color3.fromRGB(30,30,30)
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true

local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1,0,0,40)
title.Position = UDim2.new(0,0,0,0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Text = "Axtonio GUI v4"

local layout = Instance.new("UIListLayout", main)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0,8)

-- UI Helpers
local function AddSlider(parent, text, min, max, default, cb)
    local frame = Instance.new("Frame", parent)
    frame.Size = UDim2.new(1,-10,0,50)
    frame.BackgroundTransparency = 1
    local label = Instance.new("TextLabel", frame)
    label.Size = UDim2.new(1,0,0,20)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.TextColor3 = Color3.fromRGB(255,255,255)
    label.Text = text..": "..default

    local bar = Instance.new("Frame", frame)
    bar.Size = UDim2.new(1,0,0,10)
    bar.Position = UDim2.new(0,0,0,30)
    bar.BackgroundColor3 = Color3.fromRGB(80,80,80)

    local fill = Instance.new("Frame", bar)
    fill.Size = UDim2.new((default-min)/(max-min),0,1,0)
    fill.BackgroundColor3 = Color3.fromRGB(170,170,255)

    local dragging = false
    local function setFromX(x)
        local pct = math.clamp((x - bar.AbsolutePosition.X)/bar.AbsoluteSize.X,0,1)
        fill.Size = UDim2.new(pct,0,1,0)
        local val = math.floor(min + pct*(max-min))
        label.Text = text..": "..val
        pcall(function() cb(val) end)
    end
    bar.InputBegan:Connect(function(inp)
        if inp.UserInputType == Enum.UserInputType.MouseButton1 then dragging=true setFromX(UserInputService:GetMouseLocation().X) end
    end)
    UserInputService.InputChanged:Connect(function(inp)
        if dragging and inp.UserInputType==Enum.UserInputType.MouseMovement then setFromX(inp.Position.X) end
    end)
    UserInputService.InputEnded:Connect(function(inp)
        if inp.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end
    end)
end

local function AddToggle(parent, text, default, cb)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(1,-10,0,30)
    btn.BackgroundColor3 = Color3.fromRGB(100,100,100)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Text = text.." : "..(default and "On" or "Off")
    local state = default
    btn.MouseButton1Click:Connect(function()
        state = not state
        btn.Text = text.." : "..(state and "On" or "Off")
        pcall(function() cb(state) end)
    end)
end

local function AddButton(parent, text, cb)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(1,-10,0,30)
    btn.BackgroundColor3 = Color3.fromRGB(90,90,90)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Text = text
    btn.MouseButton1Click:Connect(function() pcall(cb) end)
end

-- Add Features
AddSlider(main,"JumpPower",50,500,State.JumpPower,function(v)
    State.JumpPower=v
    local hum=getHumanoid()
    if hum then hum.JumpPower=v end
end)

AddSlider(main,"Speed Boost",0.5,5,State.SpeedBoost,function(v)
    State.SpeedBoost=v
    local hum=getHumanoid()
    if hum then hum.WalkSpeed=16*v end
end)

AddToggle(main,"Noclip",State.Noclip,function(s) State.Noclip=s end)
AddToggle(main,"Fly",State.Fly,function(s) enableFly(s) end)
AddSlider(main,"Fly Speed",10,300,State.FlySpeed,function(v) State.FlySpeed=v end)

AddSlider(main,"Gravity",0,500,State.Gravity,function(v) Workspace.Gravity=v end)
AddSlider(main,"HipHeight",0,10,State.HipHeight,function(v)
    local hum=getHumanoid()
    if hum then hum.HipHeight=v end
end)
AddSlider(main,"FOV",10,120,State.FOV,function(v)
    Workspace.CurrentCamera.FieldOfView=v
end)

AddButton(main,"Sit",function()
    local hum=getHumanoid()
    if hum then hum.Sit=true end
end)

AddButton(main,"Reset Character",function()
    LocalPlayer:LoadCharacter()
end)

AddButton(main,"Teleport Random Player",teleportRandomPlayer)
AddToggle(main,"ESP (Box+Name)",State.ESP,function(s) State.ESP=s end)

AddButton(main,"FPS Booster",function()
    for _,v in pairs(Workspace:GetDescendants()) do
        if v:IsA("BasePart") then v.Material=Enum.Material.SmoothPlastic v.Reflectance=0 end
    end
    local Lighting=game:GetService("Lighting")
    Lighting.GlobalShadows=false Lighting.FogEnd=9e9 Lighting.Brightness=1
end)
